{"pages":[{"title":"about","text":"关于我 一枚无名小辈，相信知识就是力量。 会一直在路上…… QQ：1870949565Email: 1870949565@qq.com","link":"/about/index.html"},{"title":"tages","text":"","link":"/tages/index.html"},{"title":"categories","text":"","link":"/categories/index.html"}],"posts":[{"title":"webpack","text":"webpack的基本使用什么是 webpack概念：webpack 是前端项目工程化的具体解决方案。 主要功能：它提供了友好的前端模块化开发支持，以及代码压缩混淆、处理浏览器端 JavaScript 的兼容性、性 能优化等强大的功能。 好处：让程序员把工作的重心放到具体功能的实现上，提高了前端开发效率和项目的可维护性。 注意：目前 Vue，React 等前端项目，基本上都是基于 webpack 进行工程化开发的。 创建列表隔行变色项目① 新建项目空白目录，并运行 npm init –y 命令，初始化包管理配置文件 package.json ② 新建 src 源代码目录 ③ 新建 src -&gt; index.html 首页和 src -&gt; index.js 脚本文件 ④ 初始化首页基本的结构 12345678910111213ul&gt;li{这是第 $ 个 li}*9//再回车，生成 &lt;ul&gt; &lt;li&gt;这是第 1 个 li&lt;/li&gt; &lt;li&gt;这是第 2 个 li&lt;/li&gt; &lt;li&gt;这是第 3 个 li&lt;/li&gt; &lt;li&gt;这是第 4 个 li&lt;/li&gt; &lt;li&gt;这是第 5 个 li&lt;/li&gt; &lt;li&gt;这是第 6 个 li&lt;/li&gt; &lt;li&gt;这是第 7 个 li&lt;/li&gt; &lt;li&gt;这是第 8 个 li&lt;/li&gt; &lt;li&gt;这是第 9 个 li&lt;/li&gt; &lt;/ul&gt; ⑤ 运行 npm install jquery –S 命令，安装 jQuery ( -S 是 –save 的缩写 ，表示安装在dependencies，开发和上线都需要) ⑥ 通过 ES6 模块化的方式导入 jQuery，实现列表隔行变色效果 1import $ from 'jquery' 在项目中安装 webpack在终端运行如下的命令，安装 webpack 相关的两个包： 1npm install webpack@5.42.1 webpack-cli@4.7.2 -D ( -D 是 –save-dev 的缩写 ，表示安装在devDependencies，仅开发需要的工具) 在项目中配置 webpack① 在项目根目录中，创建名为 webpack.config.js 的 webpack 配置文件，并初始化如下的基本配置： 1234// 使用 Node.js 中的导出语法，向外导出一个 webpack 的配置对象module.exports = { mode: 'development' //mode 用来指定构建模式。可选值有 development（开发，打包速度快） 和 production（上线，体积小）} ② 在 package.json 的 scripts 节点下，新增 dev 脚本如下： 123&quot;scripts&quot;: { &quot;dev&quot;: &quot;webpack&quot;}, ③ 在终端中运行 npm run dev 命令，启动 webpack 进行项目的打包构建 mode 的可选值mode 节点的可选值有两个，分别是： ① development 开发环境 不会对打包生成的文件进行代码压缩和性能优化 打包速度快，适合在开发阶段使用 ② production 生产环境 会对打包生成的文件进行代码压缩和性能优化 打包速度很慢，仅适合在项目发布阶段使用 webpack.config.js 文件的作用​ webpack.config.js 是 webpack 的配置文件。webpack 在真正开始打包构建之前，会先读取这个配置文件，从而基于给定的配置，对项目进行打包。 ​ 注意：由于 webpack 是基于 node.js 开发出来的打包工具，因此在它的配置文件中，支持使用 node.js 相关的语法和模块进行 webpack 的个性化配置。 webpack 中的默认约定在 webpack 4.x 和 5.x 的版本中，有如下的默认约定： 默认的打包入口文件为 src -&gt; index.js 默认的输出文件路径为 dist -&gt; main.js 注意：可以在 webpack.config.js 中修改打包的默认约定 自定义打包的入口与出口在 webpack.config.js 配置文件中，通过 entry 节点指定打包的入口。通过 output 节点指定打包的出口。 123456789const path = require('path') // 导入 node.js 中专门操作路径的模块// 使用 Node.js 中的导出语法，向外导出一个 webpack 的配置对象module.exports = { entry:path.join(__dirname, './src/index.js'), // 打包入口文件的路径 output: { path: path.join(__dirname, './dist'), // 输出文件的存放路径 filename: 'main.js' // 输出文件的名称 }} webpack 中的插件webpack 插件的作用通过安装和配置第三方的插件，可以拓展 webpack 的能力，从而让 webpack 用起来更方便。最常用的 webpack 插件有如下两个： webpack-dev-server 类似于 node.js 阶段用到的 nodemon 工具 每当修改了源代码，webpack 会自动进行项目的打包和构建 html-webpack-plugin webpack 中的 HTML 插件（类似于一个模板引擎插件） 可以通过此插件自定制 index.html 页面的内容 webpack-dev-serverwebpack-dev-server 可以让 webpack 监听项目源代码的变化，从而进行自动打包构建。 安装 webpack-dev-server1npm install webpack-dev-server@3.11.2 -D 配置 webpack-dev-server① 修改 package.json -&gt; scripts 中的 dev 命令如下： 123&quot;scripts&quot;: { &quot;dev&quot;: &quot;webpack serve&quot;}, ② 再次运行 npm run dev 命令，重新进行项目的打包 ③ 在浏览器中访问 http://localhost:8080 地址，查看自动打包效果 打包生成的文件哪儿去了？① 不配置 webpack-dev-server 的情况下，webpack 打包生成的文件，会存放到实际的物理磁盘上 严格遵守开发者在 webpack.config.js 中指定配置 根据 output 节点指定路径进行存放 ② 配置了 webpack-dev-server 之后，打包生成的文件存放到了内存中 不再根据 output 节点指定的路径，存放到实际的物理磁盘上 提高了实时打包输出的性能，因为内存比物理磁盘速度快很多 生成到内存中的文件该如何访问？webpack-dev-server 生成到内存中的文件，默认放到了项目的根目录中，而且是虚拟的、不可见的。 可以直接用 / 表示项目根目录，后面跟上要访问的文件名称，即可访问内存中的文件 例如 /bundle.js 就表示要访问 webpack-dev-server 生成到内存中的 bundle.js 文件 html-webpack-pluginhtml-webpack-plugin 是 webpack 中的 HTML 插件，可以通过此插件自定制 index.html 页面的内容。 通过 html-webpack-plugin 插件，将 src 目录下的 index.html 首页，复制到项目根目录中一份！即可在根目录下打开 index.html 页面 安装 html-webpack-plugin运行如下的命令，即可在项目中安装此插件： 1npm install html-webpack-plugin@5.3.2 -D 配置 html-webpack-plugin修改 package.json文件 123456789101112// 导入 html-webpack-plugin 这个插件，得到插件的构造函数const HtmlPlugin = require('html-webpack-plugin')// new 构造函数，创建插件的实例对象const htmlPlugin = new HtmlPlugin({ template: './src/index.html', // 原文件路径和文件名 filename: './index.html' // 指定复制到的文件路径和文件名})module.exports = { mode: 'development', plugins: [htmlPlugin], // 插件的数组，通过plugins节点，使htmlPlugin插件生效} 解惑 html-webpack-plugin不需要导入js文件① 通过 HTML 插件复制到项目根目录中的 index.html 页面，也被放到了内存中 ② HTML 插件在生成的 index.html 页面，自动注入了同级目录下打包的 bundle.js 文件 devServer 节点在 webpack.config.js 配置文件中，可以通过 devServer 节点对 webpack-dev-server 插件进行更多的配置， 示例代码如下： 1234567module.exports = { devServer: { open: true, // 初次完成打包后，自动打开默认浏览器 host: '127.0.0.1', // 运行的主机地址 port: 80, // 打包的端口号 }} 注意：凡是修改了 webpack.config.js 配置文件，或修改了 package.json 配置文件，必须重启实时打包的服 务器，否则最新的配置文件无法生效！ webpack 中的 loaderloader 概述在实际开发过程中，webpack 默认只能打包处理以 .js 后缀名结尾的模块。其他非 .js 后缀名结尾的模块， webpack 默认处理不了，需要调用 loader 加载器才可以正常打包，否则会报错！ loader 加载器的作用：协助 webpack 打包处理特定的文件模块。比如： css-loader 可以打包处理 .css 相关的文件 less-loader 可以打包处理 .less 相关的文件 babel-loader 可以打包处理 webpack 无法处理的高级 JS 语法 打包处理 css 文件① 运行 npm i style-loader@3.0.0 css-loader@5.2.6 -D 命令，安装处理 css 文件的 loader ② 在 webpack.config.js 的 module -&gt; rules 数组中，添加 loader 规则如下： 12345module: { // 所有第三方文件模块的匹配规则 rules: [ // 文件后缀名的匹配规则 { test: /\\.css$/, use: ['style-loader', 'css-loader']} ]} 其中，test 表示匹配的文件类型， use 表示对应要调用的 loader 注意： use 数组中指定的 loader 顺序是固定的 多个 loader 的调用顺序是：从后往前调用 打包处理 less 文件① 运行 npm i less-loader@10.0.1 less@4.1.1 -D 命令 ② 在 webpack.config.js 的 module -&gt; rules 数组中，添加 loader 规则如下： 12345module: { // 所有第三方文件模块的匹配规则 rules: [ // 文件后缀名的匹配规则 { test: /\\.less$/, use: ['style-loader', 'css-loader', 'less-loader']} ]} 打包处理样式表中与 url 路径相关的文件① 运行 npm i url-loader@4.1.1 file-loader@6.2.0 -D 命令 ② 在 webpack.config.js 的 module -&gt; rules 数组中，添加 loader 规则如下： 12345module: { // 所有第三方文件模块的匹配规则 rules: [ // 文件后缀名的匹配规则 { test: /\\.jpg|png|gif$/, use: 'url-loader?limit=22229'} ] } 其中 ? 之后的是 loader 的参数项： limit 用来指定图片的大小，单位是字节（byte） 只有 ≤ limit 大小的图片，才会被转为 base64 格式的图片 打包处理 js 文件中的高级语法webpack 只能打包处理一部分高级的 JavaScript 语法。对于那些 webpack 无法处理的高级 js 语法，需要借 助于 babel-loader 进行打包处理。例如 webpack 无法处理下面的 JavaScript 代码 12345678910// 定义了名为 info 的装饰器function info(target) { // 为目标添加静态属性 info target.info = 'Person info'}// 为 Person 类应用 info 装饰器@infoclass Person {}// 打印 Person 的静态属性 infoconsole.log(Person.info) 安装 babel-loader 相关的包运行如下的命令安装对应的依赖包： 1npm i babel-loader@8.2.2 @babel/core@7.14.6 @babel/plugin-proposal-decorators@7.14.5 -D 在 webpack.config.js 的 module -&gt; rules 数组中，添加 loader 规则如下： 12// 注意:必须使用 exclude 指定排除项;因为 node_modules 目录下的第三方包不需要被打包{ test: /\\.js$/, use: 'babel-loader', exclude: /node_modules/} 配置 babel-loader在项目根目录下，创建名为 babel.config.js 的配置文件，定义 Babel 的配置项如下： 1234module.exports = { // 声明 babel 可用的插件 plugins: [['@babel/plugin-proposal-decorators', { legacy: true}]]} Babel 的官网 ： 打包发布为什么要打包发布项目开发完成之后，需要使用 webpack 对项目进行打包发布，主要原因有以下两点： 开发环境下，打包生成的文件存放于内存中，无法获取到最终打包生成的文件 开发环境下，打包生成的文件不会进行代码压缩和性能优化 为了让项目能够在生产环境中高性能的运行，因此需要对项目进行打包发布。 配置 webpack 的打包发布在 package.json 文件的 scripts 节点下，新增 build 命令如下： 1234&quot;scripts&quot;: { &quot;dev&quot;: &quot;webpack serve&quot;, // 开发环境中，运行 dev 命令 &quot;build&quot;: &quot;webpack --mode production&quot; // 项目发布时，运行 build 命令} --model 是一个参数项，用来指定 webpack 的运行模式。production 代表生产环境，会对打包生成的文件进行代码压缩和性能优化。 注意：通过 –model 指定的参数项，会覆盖 webpack.config.js 中的 model 选项。 把 JavaScript 文件统一生成到 js 目录中在 webpack.config.js 配置文件的 output 节点中，进行如下的配置： 1234output: { path: path.join(__dirname, './dist'), // 输出文件的存放路径 filename: 'js/bundle.js' // 输出文件的名称} 把图片文件统一生成到 images 目录中修改 webpack.config.js 中的 module -&gt; rules 数组的 url-loader 配置项，新增 outputPath 参数即可指定图片文件的输出路径： 1{ test: /\\.jpg|png|gif$/, use: 'url-loader?limit=22229&amp;outputPath=images'} 自动清理 dist 目录下的旧文件为了在每次打包发布时自动清理掉 dist 目录中的旧文件，可以安装并配置 clean-webpack-plugin 插件 安装clean-webpack-plugin1npm i clean-webpack-plugin -D 配置使用clean-webpack-plugin①在 webpack.config.js 中的导入clean-webpack-plugin 1const { CleanWebpackPlugin } = require('clean-webpack-plugin') ②在 webpack.config.js 中的 module.exports 节点下的 plugins中 new CleanWebpackPlugin() 123module.exports = { plugins: [htmlPlugin, new CleanWebpackPlugin()], } Source Map什么是 Source MapSource Map 就是一个信息文件，里面储存着位置信息。也就是说，Source Map 文件中存储着压缩混淆后的 代码，所对应的转换前的位置。 有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码，能够极大的方便后期的调试。 webpack 开发环境下的 Source Map在开发环境下，webpack 默认启用了 Source Map 功能。当程序运行出错时，可以直接在控制台提示错误行 的位置，并定位到具体的源代码。 默认 Source Map 的问题开发环境下默认生成的 Source Map，记录的是生成后的代码的位置。会导致运行时报错的行数与源代码的行数不一致的问题。 解决默认 Source Map 的问题开发环境下，推荐在 webpack.config.js 中添加如下的配置，即可保证运行时报错的行数与源代码的行数 保持一致 1234module.exports = { mode: 'development', devtool: 'eval-source-map' } webpack 生产环境下的 Source Map在生产环境下，如果省略了 devtool 选项，则最终生成的文件中不包含 Source Map。这能够防止原始代码通 过 Source Map 的形式暴露给其他人。 只定位行数不暴露源码在生产环境下，如果只想定位报错的具体行数，且不想暴露源码。此时可以将 devtool 的值设置为 nosources-source-map。 定位行数且暴露源码在生产环境下，如果想在定位报错行数的同时，展示具体报错的源码。此时可以将 devtool 的值设置为 source-map。（不推荐） Source Map 的最佳实践① 开发环境下： 建议把 devtool 的值设置为 eval-source-map 好处：可以精准定位到具体的错误行 ② 生产环境下： 建议关闭 Source Map 或将 devtool 的值设置为 nosources-source-map 好处：防止源码泄露，提高网站的安全性","link":"/2022/07/29/webpack/"},{"title":"JavaScript的一些学习","text":"写好JS的一些原则 各司其责 - 让HTML、CSS和JavaScript职能分离。 组件封装 - 好的UI组件具备正确性、扩展性、复用性。 过程抽象 - 应用函数式编程思想。 各司其责 - 控制一个网页，让它支持浅色和深色两种浏览模式。版本一：1234567891011121314151617181920&lt;body&gt; ... &lt;button id=&quot;modeBtn&quot;&gt;&lt;/button&gt;&lt;/body&gt;&lt;script&gt; const btn = document.getElementById('modeBtn'); btn.addEventListener('click', function(e){ const body = document.body; if(e.target.innerHTML === '🌞') { body.style.backgroundColor = 'black'; body.style.color = 'white'; e.target.innerHTML = '🌜'; } else { body.style.backgroundColor = 'white'; body.style.color = 'black'; e.target.innerHTML = '🌞'; } }); &lt;/script&gt; 特点：在 js 代码里直接操作 css 样式，不推荐。 版本二：12345678910111213141516171819202122232425262728293031 &lt;style&gt; body.night { background-color: black; color: white; transition: all 1s; } #modeBtn::after{ content: '🌞'; } body.night #modeBtn::after{ content: '🌜'; } &lt;/style&gt;&lt;body&gt; ... &lt;button id=&quot;modeBtn&quot;&gt;&lt;/button&gt;&lt;/body&gt;&lt;script&gt; const btn = document.getElementById('modeBtn'); btn.addEventListener('click', (e) =&gt; { const body = document.body; if(body.className !== 'night') { body.className = 'night'; } else { body.className = ''; } });&lt;/script&gt; 特点：将 js 与 css 分离开，js里只是增加了类，推荐。 版本三：12345678910111213141516171819202122232425262728 &lt;style&gt; .content{ transition: all 1s; } #modeCheckBox { display: none; } #modeCheckBox:checked + .content { background-color: black; color: white; transition: all 1s; } #modeBtn::after{ content: '🌞'; } #modeCheckBox:checked + .content #modeBtn::after { content: '🌜'; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;input id=&quot;modeCheckBox&quot; type=&quot;checkbox&quot;&gt; &lt;div class=&quot;content&quot;&gt; &lt;label id=&quot;modeBtn&quot; for=&quot;modeCheckBox&quot; &gt;&lt;/label&gt; ... &lt;/div&gt;&lt;/body&gt; 特点，纯css实现，推荐。 注意： HTML/CSS/JS 各司其责 应当避免不必要的由 JS 直接操作样式 可以用 class 来表示状态 纯展示类交互寻求零 JS 方案 组件封装 - 用原生 JS 写一个电商网站的轮播图组件是指Web页面上抽出来一个个包含模版(HTML)、功能(JS)和样式(CSS)的单元。好的组件具备封装性、正确性、扩展性、复用性。 版本一（不加左右箭头和圆点选择）：结构轮播图是一个典型的列表结构，我们可以使用无序列表ul元素来实现。 1234567891011121314151617&lt;div id=&quot;my-slider&quot; class=&quot;slider-list&quot;&gt; &lt;ul&gt; &lt;li class=&quot;slider-list__item--selected&quot;&gt; &lt;img src=&quot;https://p5.ssl.qhimg.com/t0119c74624763dd070.png&quot;&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg&quot;&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg&quot;&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg&quot;&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; 表现 使用 CSS 绝对定位将图片重叠在同一个位置 轮播图切换的状态使用修饰符（modifier） 轮播图的切换动画使用 CSS transition 123456789101112131415161718192021#my-slider{ position: relative; width: 790px;}.slider-list ul{ list-style-type:none; position: relative; padding: 0; margin: 0;}.slider-list__item,.slider-list__item--selected{ position: absolute; transition: opacity 1s; opacity: 0; text-align: center;}.slider-list__item--selected{ transition: opacity 1s; opacity: 1;} 行为：APISlider 获取当前选中项： +getSelectedltem() 获取当前选中项的索引：+getSelectedltemlndex() 根据索引，跳转到指定位置图片：+slideTo() 跳转到下一张图片：+slideNext() 跳转到上一张图片：+slidePrevious( ) 123456789101112131415161718192021222324252627282930313233343536373839404142class Slider{ constructor(id){ this.container = document.getElementById(id); this.items = this.container .querySelectorAll('.slider-list__item, .slider-list__item--selected'); } getSelectedItem(){ const selected = this.container .querySelector('.slider-list__item--selected'); return selected } getSelectedItemIndex(){ return Array.from(this.items).indexOf(this.getSelectedItem()); } slideTo(idx){ const selected = this.getSelectedItem(); if(selected){ selected.className = 'slider-list__item'; } const item = this.items[idx]; if(item){ item.className = 'slider-list__item--selected'; } } slideNext(){ const currentIdx = this.getSelectedItemIndex(); const nextIdx = (currentIdx + 1) % this.items.length; this.slideTo(nextIdx); } slidePrevious(){ const currentIdx = this.getSelectedItemIndex(); const previousIdx = (this.items.length + currentIdx - 1) % this.items.length; this.slideTo(previousIdx); }}const slider = new Slider('my-slider');//slider.slideTo(3);setInterval(() =&gt; { slider.slideNext();},2000) 版本二（加上左右切换和下面圆点选择）：HTML123456789101112131415161718192021222324&lt;div id=&quot;my-slider&quot; class=&quot;slider-list&quot;&gt; &lt;ul&gt; &lt;li class=&quot;slider-list__item--selected&quot;&gt; &lt;img src=&quot;https://p5.ssl.qhimg.com/t0119c74624763dd070.png&quot;/&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg&quot;/&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg&quot;/&gt; &lt;/li&gt; &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg&quot;/&gt; &lt;/li&gt; &lt;/ul&gt; &lt;a class=&quot;slide-list__next&quot;&gt;&lt;/a&gt; &lt;a class=&quot;slide-list__previous&quot;&gt;&lt;/a&gt; &lt;div class=&quot;slide-list__control&quot;&gt; &lt;span class=&quot;slide-list__control-buttons--selected&quot;&gt;&lt;/span&gt; &lt;span class=&quot;slide-list__control-buttons&quot;&gt;&lt;/span&gt; &lt;span class=&quot;slide-list__control-buttons&quot;&gt;&lt;/span&gt; &lt;span class=&quot;slide-list__control-buttons&quot;&gt;&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; CSS12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697#my-slider{ position: relative; width: 790px; height: 340px;}.slider-list ul{ list-style-type:none; position: relative; width: 100%; height: 100%; padding: 0; margin: 0;}.slider-list__item,.slider-list__item--selected{ position: absolute; transition: opacity 1s; opacity: 0; text-align: center;}.slider-list__item--selected{ transition: opacity 1s; opacity: 1;}.slide-list__control{ position: relative; display: table; background-color: rgba(255, 255, 255, 0.5); padding: 5px; border-radius: 12px; bottom: 30px; margin: auto;}.slide-list__next,.slide-list__previous{ display: inline-block; position: absolute; top: 50%; margin-top: -25px; width: 30px; height:50px; text-align: center; font-size: 24px; line-height: 50px; overflow: hidden; border: none; background: transparent; color: white; background: rgba(0,0,0,0.2); cursor: pointer; opacity: 0; transition: opacity .5s;}.slide-list__previous { left: 0;}.slide-list__next { right: 0;}#my-slider:hover .slide-list__previous { opacity: 1;}#my-slider:hover .slide-list__next { opacity: 1;}.slide-list__previous:after { content: '&lt;';}.slide-list__next:after { content: '&gt;';}.slide-list__control-buttons,.slide-list__control-buttons--selected{ display: inline-block; width: 15px; height: 15px; border-radius: 50%; margin: 0 5px; background-color: white; cursor: pointer;}.slide-list__control-buttons--selected { background-color: red;} JS1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192class Slider{ constructor(id, cycle = 3000){ this.container = document.getElementById(id); this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected'); this.cycle = cycle; const controller = this.container.querySelector('.slide-list__control'); if(controller){ const buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected'); controller.addEventListener('mouseover', evt=&gt;{ const idx = Array.from(buttons).indexOf(evt.target); if(idx &gt;= 0){ this.slideTo(idx); this.stop(); } }); controller.addEventListener('mouseout', evt=&gt;{ this.start(); }); this.container.addEventListener('slide', evt =&gt; { const idx = evt.detail.index const selected = controller.querySelector('.slide-list__control-buttons--selected'); if(selected) selected.className = 'slide-list__control-buttons'; buttons[idx].className = 'slide-list__control-buttons--selected'; }) } const previous = this.container.querySelector('.slide-list__previous'); if(previous){ previous.addEventListener('click', evt =&gt; { this.stop(); this.slidePrevious(); this.start(); evt.preventDefault(); }); } const next = this.container.querySelector('.slide-list__next'); if(next){ next.addEventListener('click', evt =&gt; { this.stop(); this.slideNext(); this.start(); evt.preventDefault(); }); } } getSelectedItem(){ let selected = this.container.querySelector('.slider-list__item--selected'); return selected } getSelectedItemIndex(){ return Array.from(this.items).indexOf(this.getSelectedItem()); } slideTo(idx){ let selected = this.getSelectedItem(); if(selected){ selected.className = 'slider-list__item'; } let item = this.items[idx]; if(item){ item.className = 'slider-list__item--selected'; } //自定义事件 const detail = {index: idx} const event = new CustomEvent('slide', {bubbles:true, detail}) this.container.dispatchEvent(event) } slideNext(){ let currentIdx = this.getSelectedItemIndex(); let nextIdx = (currentIdx + 1) % this.items.length; this.slideTo(nextIdx); } slidePrevious(){ let currentIdx = this.getSelectedItemIndex(); let previousIdx = (this.items.length + currentIdx - 1) % this.items.length; this.slideTo(previousIdx); } start(){ this.stop(); this._timer = setInterval(()=&gt;this.slideNext(), this.cycle); } stop(){ clearInterval(this._timer); }}const slider = new Slider('my-slider');slider.start(); 版本四：将 js 代码插件化解耦 将控制元素抽取成插件 插件与组件之间通过依赖注入方式建立联系 将 pluginController, pluginPrevious, pluginNext 抽离出来 js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104class Slider{ constructor(id, cycle = 3000){ this.container = document.getElementById(id); this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected'); this.cycle = cycle; } registerPlugins(...plugins){ plugins.forEach(plugin =&gt; plugin(this)); } getSelectedItem(){ const selected = this.container.querySelector('.slider-list__item--selected'); return selected } getSelectedItemIndex(){ return Array.from(this.items).indexOf(this.getSelectedItem()); } slideTo(idx){ const selected = this.getSelectedItem(); if(selected){ selected.className = 'slider-list__item'; } const item = this.items[idx]; if(item){ item.className = 'slider-list__item--selected'; } const detail = {index: idx} const event = new CustomEvent('slide', {bubbles:true, detail}) this.container.dispatchEvent(event) } slideNext(){ const currentIdx = this.getSelectedItemIndex(); const nextIdx = (currentIdx + 1) % this.items.length; this.slideTo(nextIdx); } slidePrevious(){ const currentIdx = this.getSelectedItemIndex(); const previousIdx = (this.items.length + currentIdx - 1) % this.items.length; this.slideTo(previousIdx); } addEventListener(type, handler){ this.container.addEventListener(type, handler) } start(){ this.stop(); this._timer = setInterval(()=&gt;this.slideNext(), this.cycle); } stop(){ clearInterval(this._timer); }}function pluginController(slider){ const controller = slider.container.querySelector('.slide-list__control'); if(controller){ const buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected'); controller.addEventListener('mouseover', evt=&gt;{ const idx = Array.from(buttons).indexOf(evt.target); if(idx &gt;= 0){ slider.slideTo(idx); slider.stop(); } }); controller.addEventListener('mouseout', evt=&gt;{ slider.start(); }); slider.addEventListener('slide', evt =&gt; { const idx = evt.detail.index const selected = controller.querySelector('.slide-list__control-buttons--selected'); if(selected) selected.className = 'slide-list__control-buttons'; buttons[idx].className = 'slide-list__control-buttons--selected'; }); } }function pluginPrevious(slider){ const previous = slider.container.querySelector('.slide-list__previous'); if(previous){ previous.addEventListener('click', evt =&gt; { slider.stop(); slider.slidePrevious(); slider.start(); evt.preventDefault(); }); } }function pluginNext(slider){ const next = slider.container.querySelector('.slide-list__next'); if(next){ next.addEventListener('click', evt =&gt; { slider.stop(); slider.slideNext(); slider.start(); evt.preventDefault(); }); } }const slider = new Slider('my-slider');slider.registerPlugins(pluginController, pluginPrevious, pluginNext);slider.start(); 版本五：模板化将HTML模板化，更易于扩展 HTML1&lt;div id=&quot;my-slider&quot; class=&quot;slider-list&quot;&gt;&lt;/div&gt; JS123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150class Slider{ constructor(id, opts = {images:[], cycle: 3000}){ this.container = document.getElementById(id); this.options = opts; this.container.innerHTML = this.render(); this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected'); this.cycle = opts.cycle || 3000; this.slideTo(0); } render(){ const images = this.options.images; const content = images.map(image =&gt; ` &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;${image}&quot;/&gt; &lt;/li&gt; `.trim()); return `&lt;ul&gt;${content.join('')}&lt;/ul&gt;`; } registerPlugins(...plugins){ plugins.forEach(plugin =&gt; { const pluginContainer = document.createElement('div'); pluginContainer.className = '.slider-list__plugin'; pluginContainer.innerHTML = plugin.render(this.options.images); this.container.appendChild(pluginContainer); plugin.action(this); }); } getSelectedItem(){ const selected = this.container.querySelector('.slider-list__item--selected'); return selected } getSelectedItemIndex(){ return Array.from(this.items).indexOf(this.getSelectedItem()); } slideTo(idx){ const selected = this.getSelectedItem(); if(selected){ selected.className = 'slider-list__item'; } let item = this.items[idx]; if(item){ item.className = 'slider-list__item--selected'; } const detail = {index: idx} const event = new CustomEvent('slide', {bubbles:true, detail}) this.container.dispatchEvent(event) } slideNext(){ const currentIdx = this.getSelectedItemIndex(); const nextIdx = (currentIdx + 1) % this.items.length; this.slideTo(nextIdx); } slidePrevious(){ const currentIdx = this.getSelectedItemIndex(); const previousIdx = (this.items.length + currentIdx - 1) % this.items.length; this.slideTo(previousIdx); } addEventListener(type, handler){ this.container.addEventListener(type, handler); } start(){ this.stop(); this._timer = setInterval(()=&gt;this.slideNext(), this.cycle); } stop(){ clearInterval(this._timer); }}const pluginController = { render(images){ return ` &lt;div class=&quot;slide-list__control&quot;&gt; ${images.map((image, i) =&gt; ` &lt;span class=&quot;slide-list__control-buttons${i===0?'--selected':''}&quot;&gt;&lt;/span&gt; `).join('')} &lt;/div&gt; `.trim(); }, action(slider){ const controller = slider.container.querySelector('.slide-list__control'); if(controller){ const buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected'); controller.addEventListener('mouseover', evt =&gt; { const idx = Array.from(buttons).indexOf(evt.target); if(idx &gt;= 0){ slider.slideTo(idx); slider.stop(); } }); controller.addEventListener('mouseout', evt =&gt; { slider.start(); }); slider.addEventListener('slide', evt =&gt; { const idx = evt.detail.index const selected = controller.querySelector('.slide-list__control-buttons--selected'); if(selected) selected.className = 'slide-list__control-buttons'; buttons[idx].className = 'slide-list__control-buttons--selected'; }); } }};const pluginPrevious = { render(){ return `&lt;a class=&quot;slide-list__previous&quot;&gt;&lt;/a&gt;`; }, action(slider){ const previous = slider.container.querySelector('.slide-list__previous'); if(previous){ previous.addEventListener('click', evt =&gt; { slider.stop(); slider.slidePrevious(); slider.start(); evt.preventDefault(); }); } }};const pluginNext = { render(){ return `&lt;a class=&quot;slide-list__next&quot;&gt;&lt;/a&gt;`; }, action(slider){ const previous = slider.container.querySelector('.slide-list__next'); if(previous){ previous.addEventListener('click', evt =&gt; { slider.stop(); slider.slideNext(); slider.start(); evt.preventDefault(); }); } }};const slider = new Slider('my-slider', {images: ['https://p5.ssl.qhimg.com/t0119c74624763dd070.png', 'https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg', 'https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg', 'https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg'], cycle:3000});slider.registerPlugins(pluginController, pluginPrevious, pluginNext);slider.start(); 版本六：组件框架抽象 将组件通用模型抽象出来 Slider：组件（可继承Component通用组件） Component：通用组件（两个抽象方法）registerPlugins：注册插件render：渲染 SliderPlugin：渲染 JS123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159class Component{ constructor(id, opts = {name, data:[]}){ this.container = document.getElementById(id); this.options = opts; this.container.innerHTML = this.render(opts.data); } registerPlugins(...plugins){ plugins.forEach(plugin =&gt; { const pluginContainer = document.createElement('div'); pluginContainer.className = `.${name}__plugin`; pluginContainer.innerHTML = plugin.render(this.options.data); this.container.appendChild(pluginContainer); plugin.action(this); }); } render(data) { /* abstract */ return '' }}class Slider extends Component{ constructor(id, opts = {name: 'slider-list', data:[], cycle: 3000}){ super(id, opts); this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected'); this.cycle = opts.cycle || 3000; this.slideTo(0); } render(data){ const content = data.map(image =&gt; ` &lt;li class=&quot;slider-list__item&quot;&gt; &lt;img src=&quot;${image}&quot;/&gt; &lt;/li&gt; `.trim()); return `&lt;ul&gt;${content.join('')}&lt;/ul&gt;`; } getSelectedItem(){ const selected = this.container.querySelector('.slider-list__item--selected'); return selected } getSelectedItemIndex(){ return Array.from(this.items).indexOf(this.getSelectedItem()); } slideTo(idx){ const selected = this.getSelectedItem(); if(selected){ selected.className = 'slider-list__item'; } const item = this.items[idx]; if(item){ item.className = 'slider-list__item--selected'; } const detail = {index: idx} const event = new CustomEvent('slide', {bubbles:true, detail}) this.container.dispatchEvent(event) } slideNext(){ const currentIdx = this.getSelectedItemIndex(); const nextIdx = (currentIdx + 1) % this.items.length; this.slideTo(nextIdx); } slidePrevious(){ const currentIdx = this.getSelectedItemIndex(); const previousIdx = (this.items.length + currentIdx - 1) % this.items.length; this.slideTo(previousIdx); } addEventListener(type, handler){ this.container.addEventListener(type, handler); } start(){ this.stop(); this._timer = setInterval(()=&gt;this.slideNext(), this.cycle); } stop(){ clearInterval(this._timer); }}const pluginController = { render(images){ return ` &lt;div class=&quot;slide-list__control&quot;&gt; ${images.map((image, i) =&gt; ` &lt;span class=&quot;slide-list__control-buttons${i===0?'--selected':''}&quot;&gt;&lt;/span&gt; `).join('')} &lt;/div&gt; `.trim(); }, action(slider){ let controller = slider.container.querySelector('.slide-list__control'); if(controller){ let buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected'); controller.addEventListener('mouseover', evt=&gt;{ var idx = Array.from(buttons).indexOf(evt.target); if(idx &gt;= 0){ slider.slideTo(idx); slider.stop(); } }); controller.addEventListener('mouseout', evt=&gt;{ slider.start(); }); slider.addEventListener('slide', evt =&gt; { const idx = evt.detail.index; let selected = controller.querySelector('.slide-list__control-buttons--selected'); if(selected) selected.className = 'slide-list__control-buttons'; buttons[idx].className = 'slide-list__control-buttons--selected'; }); } }};const pluginPrevious = { render(){ return `&lt;a class=&quot;slide-list__previous&quot;&gt;&lt;/a&gt;`; }, action(slider){ let previous = slider.container.querySelector('.slide-list__previous'); if(previous){ previous.addEventListener('click', evt =&gt; { slider.stop(); slider.slidePrevious(); slider.start(); evt.preventDefault(); }); } }};const pluginNext = { render(){ return `&lt;a class=&quot;slide-list__next&quot;&gt;&lt;/a&gt;`; }, action(slider){ let previous = slider.container.querySelector('.slide-list__next'); if(previous){ previous.addEventListener('click', evt =&gt; { slider.stop(); slider.slideNext(); slider.start(); evt.preventDefault(); }); } }};const slider = new Slider('my-slider', {name: 'slide-list', data: ['https://p5.ssl.qhimg.com/t0119c74624763dd070.png', 'https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg', 'https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg', 'https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg'], cycle:3000});slider.registerPlugins(pluginController, pluginPrevious, pluginNext);slider.start(); 总结 组件设计的原则：封装性、正确性、扩展性、复用性 实现组件的步骤：结构设计、展现效果、行为设计 三次重构 插件化 模板化 抽象化（组件框架） 过程抽象 用来处理局部细节控制的一些方法 函数式编程思想的基础应用 操作次数限制 一些异步交互 一次性的HTTP请求 once 函数，只调用一次 为了能够让“只执行一次“的需求覆盖不同的事件处理，我们可以将这个需求剥离出来。这个过程我们称为过程抽象。 HTML1234567&lt;body&gt; &lt;ul&gt; &lt;li&gt;&lt;button&gt;&lt;/button&gt;&lt;span&gt;任务一：学习HTML&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;button&gt;&lt;/button&gt;&lt;span&gt;任务二：学习CSS&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;button&gt;&lt;/button&gt;&lt;span&gt;任务三：学习JavaScript&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/body&gt; CSS12345678910111213141516171819202122232425ul { padding: 0; margin: 0; list-style: none;}li button { border: 0; background: transparent; cursor: pointer; outline: 0 none;}li.completed { transition: opacity 2s; opacity: 0;}li button:before { content: '☑️';}li.completed button:before { content: '✅';} JS123456789101112131415161718192021function once(fn) { //外层 return function(...args) { //内层 if(fn) { const ret = fn.apply(this, args); fn = null; return ret; } }}const list = document.querySelector('ul');const buttons = list.querySelectorAll('button');buttons.forEach((button) =&gt; { button.addEventListener('click', once((evt) =&gt; { const target = evt.target; target.parentNode.className = 'completed'; setTimeout(() =&gt; { list.removeChild(target.parentNode); }, 2000); }));}); 高阶函数HOF 以函数作为参数 以函数作为返回值 常用于作为函数装饰器 12345function HOF0(fn) { return function(...args) { return fn.apply(this, args); }} once 函数（执行一次）123456789function once(fn) { return function(...args) { if(fn) { const ret = fn.apply(this, args); fn = null; return ret; } }} Throttle 函数（节流函数，固定时间间隔执行）1234567891011function throttle(fn, time = 500){ let timer; return function(...args){ if(timer == null){ fn.apply(this, args); timer = setTimeout(() =&gt; { timer = null; }, time) } }} 下面例子： HTML123每500毫秒可记录一次&lt;button id=&quot;btn&quot;&gt;点我&lt;/button&gt;&lt;div id=&quot;circle&quot;&gt;0&lt;/div&gt; CSS12345678910111213141516#circle { width: 50px; height: 50px; border-radius: 50%; background-color: red; line-height: 50px; text-align: center; color: white; opacity: 1.0; transition: opacity .25s;}#circle.fade { opacity: 0.0; transition: opacity .25s;} JS1234567891011121314151617function throttle(fn, time = 500){ let timer; return function(...args){ if(timer == null){ fn.apply(this, args); timer = setTimeout(() =&gt; { timer = null; }, time) } }}btn.onclick = throttle(function(e){ circle.innerHTML = parseInt(circle.innerHTML) + 1; circle.className = 'fade'; setTimeout(() =&gt; circle.className = '', 250);}); Debounce 函数（防抖函数）12345678910function debounce(fn, dur){ dur = dur || 100; var timer; return function(){ clearTimeout(timer); timer = setTimeout(() =&gt; { fn.apply(this, arguments); }, dur); }} 下面例子： HTML12&lt;script src=&quot;https://s1.qhres2.com/!bd39e7fb/animator-0.2.0.min.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;bird&quot; class=&quot;sprite bird1&quot;&gt;&lt;/div&gt; CSS1234567891011121314151617181920212223html, body { margin:0; padding:0;}.sprite { display:inline-block; overflow:hidden; background-repeat: no-repeat; background-image:url(https://p1.ssl.qhimg.com/d/inn/0f86ff2a/8PQEganHkhynPxk-CUyDcJEk.png);}.bird0 {width:86px; height:60px; background-position: -178px -2px}.bird1 {width:86px; height:60px; background-position: -90px -2px}.bird2 {width:86px; height:60px; background-position: -2px -2px}#bird{ position: absolute; left: 100px; top: 100px; transform: scale(0.5); transform-origin: -50% -50%;} JS12345678910111213141516171819202122232425262728293031var i = 0;setInterval(function(){ bird.className = &quot;sprite &quot; + 'bird' + ((i++) % 3);}, 1000/10);function debounce(fn, dur){ dur = dur || 100; var timer; return function(){ clearTimeout(timer); timer = setTimeout(() =&gt; { fn.apply(this, arguments); }, dur); }}document.addEventListener('mousemove', debounce(function(evt){ var x = evt.clientX, y = evt.clientY, x0 = bird.offsetLeft, y0 = bird.offsetTop; // console.log(x, y); var a1 = new Animator(1000, function(ep){ bird.style.top = y0 + ep * (y - y0) + 'px'; bird.style.left = x0 + ep * (x - x0) + 'px'; }, p =&gt; p * p); a1.animate();}, 100)); Consumer 函数123456789101112131415161718function consumer(fn, time){ let tasks = [], timer; return function(...args){ tasks.push(fn.bind(this, ...args)); if(timer == null){ timer = setInterval(() =&gt; { tasks.shift().call(this) if(tasks.length &lt;= 0){ clearInterval(timer); timer = null; } }, time) } }} Consumer 函数1 （间隔时间调用）下面例子： HTML:1&lt;div id=&quot;app&quot;&gt;&lt;/div&gt; JS12345678910111213141516171819202122232425262728293031function consumer(fn, time){ let tasks = [], timer; return function(...args){ tasks.push(fn.bind(this, ...args)); if(timer == null){ timer = setInterval(() =&gt; { tasks.shift().call(this) if(tasks.length &lt;= 0){ clearInterval(timer); timer = null; } }, time) } }}function add(ref, x){ const v = ref.value + x; console.log(`${ref.value} + ${x} = ${v}`); ref.value = v; return ref;}let consumerAdd = consumer(add, 1000);const ref = {value: 0};for(let i = 0; i &lt; 10; i++){ consumerAdd(ref, i);} Consumer 函数2 （延时调用）下面例子： HTML1234&lt;div id=&quot;main&quot;&gt; &lt;button id=&quot;btn&quot;&gt;Hit&lt;/button&gt; &lt;span id=&quot;count&quot;&gt;+0&lt;/span&gt;&lt;/div&gt; CSS 1234567891011121314151617181920212223#main { padding-top: 20px; font-size: 26px;}#btn { font-size: 30px; border-radius: 15px; border: solid 3px #fa0;}#count { position: absolute; margin-left: 6px; opacity: 1.0; transform: translate(0, 10px);}#count.hit { opacity: 0.1; transform: translate(0, -20px); transition: all .5s;} JS12345678910111213141516171819202122232425262728293031function consumer(fn, time){ let tasks = [], timer; return function(...args){ tasks.push(fn.bind(this, ...args)); if(timer == null){ timer = setInterval(() =&gt; { tasks.shift().call(this) if(tasks.length &lt;= 0){ clearInterval(timer); timer = null; } }, time) } }}btn.onclick = consumer((evt)=&gt;{ let t = parseInt(count.innerHTML.slice(1)) + 1; count.innerHTML = `+${t}`; count.className = 'hit'; let r = t * 7 % 256, g = t * 17 % 128, b = t * 31 % 128; count.style.color = `rgb(${r},${g},${b})`.trim(); setTimeout(()=&gt;{ count.className = 'hide'; }, 500);}, 800) Iterative 函数 （迭代函数，批量操作）123456789101112function iterative(fn) { return function(subject, ...rest) { if(isIterable(subject)) { const ret = []; for(let obj of subject) { ret.push(fn.apply(this, [obj, ...rest])); } return ret; } return fn.apply(this, [subject, ...rest]); }} 下面例子： HTML123456789&lt;ul&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt;b&lt;/li&gt; &lt;li&gt;c&lt;/li&gt; &lt;li&gt;d&lt;/li&gt; &lt;li&gt;e&lt;/li&gt; &lt;li&gt;f&lt;/li&gt; &lt;li&gt;g&lt;/li&gt;&lt;/ul&gt; JS12345678910111213141516171819202122const isIterable = obj =&gt; obj != null &amp;&amp; typeof obj[Symbol.iterator] === 'function';function iterative(fn) { return function(subject, ...rest) { if(isIterable(subject)) { const ret = []; for(let obj of subject) { ret.push(fn.apply(this, [obj, ...rest])); } return ret; } return fn.apply(this, [subject, ...rest]); }}const setColor = iterative((el, color) =&gt; { el.style.color = color;});const els = document.querySelectorAll('li:nth-child(2n+1)');setColor(els, 'red'); 编程范式命令式（过程）1234567switcher.onclick = function(evt){ if(evt.target.className === 'on'){ evt.target.className = 'off'; }else{ evt.target.className = 'on'; }} 声明式（结果）123456789101112function toggle(...actions){ return function(...args){ let action = actions.shift(); actions.push(action); return action.apply(this, args); }}switcher.onclick = toggle( evt =&gt; evt.target.className = 'off', evt =&gt; evt.target.className = 'on');","link":"/2022/07/28/JavaScript%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%A6%E4%B9%A0/"},{"title":"解决不能加载webpack-cli问题","text":"明明安装了webpack-cli包，却报Unable to load '@webpack-cli/serve' command错误 报错原因输入下面代码，查看webpack-cli的版本 12npx webpack --version复制代码 结果： 1234webpack 5.42.1webpack-cli 4.7.2webpack-dev-server 3.11.2复制代码 可能是 webpack-cli 版本不够，导致出现的错误。 解决方案不用卸载旧版本的 webpack-cli ，使用下面命令安装最新版本的 webpack-cli 1npm install -D webpack-cli","link":"/2022/07/27/%E8%A7%A3%E5%86%B3%E4%B8%8D%E8%83%BD%E5%8A%A0%E8%BD%BDwebpack-cli%E9%97%AE%E9%A2%98/"},{"title":"解决JSON中不允许添加注释的问题","text":"vs code中如何解决JSON中不允许注释？ Comments are not permitted？ 错误显示： 解决方法：点击底部工具栏的 JSON 弹出的窗口中输入 json with Comments ,找到检索项后点击 再输入注释就正常了","link":"/2022/07/26/%E8%A7%A3%E5%86%B3JSON%E4%B8%AD%E4%B8%8D%E5%85%81%E8%AE%B8%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A%E7%9A%84%E9%97%AE%E9%A2%98/"},{"title":"在前端项目中使用MySQL","text":"在项目中操作数据库的步骤 安装操作 MySQL 数据库的第三方模块（mysql） 通过 mysql 模块连接到 MySQL 数据库 通过 mysql 模块执行 SQL 语句 安装与配置 mysql 模块安装 mysql 模块mysql 模块是托管于 npm 上的第三方模块。它提供了在 Node.js 项目中连接和操作 MySQL 数据库的能力。 想要在项目中使用它，需要先运行如下命令，将 mysql 安装为项目的依赖包： 1npm i mysql 配置 mysql 模块在使用 mysql 模块操作 MySQL 数据库之前，必须先对 mysql 模块进行必要的配置，主要的配置步骤如下： 123456789// 1. 导入 mysql 模块const mysql = require('mysql')// 2. 建立与 MySQL 数据库的连接关系const db = mysql.createPool({ host: '127.0.0.1', // 数据库的 IP 地址 user: 'root', // 登录数据库的账号 password: 'root', // 登录数据库的密码 database: 'mydb', // 指定要操作哪个数据库}) 测试 mysql 模块能否正常工作调用 db.query() 函数，指定要执行的 SQL 语句，通过回调函数拿到执行的结果： 1234567// 测试 mysql 模块能否正常工作db.query('select 1', (err, results) =&gt; { // mysql 模块工作期间报错了 if(err) return console.log(err.message) // 能够成功的执行 SQL 语句 console.log(results)}) 使用 mysql 模块操作 MySQL 数据库查询数据查询 users 表中所有的数据： 123456789// 查询 users 表中所有的数据const sqlStr = 'select * from users'db.query(sqlStr, (err, results) =&gt; { // 查询数据失败 if (err) return console.log(err.message) // 查询数据成功 // 注意：如果执行的是 select 查询语句，则执行的结果是数组 console.log(results)}) 插入数据向 users 表中新增数据， 其中 username 为 Spider-Man，password 为 pcc321： 123456789101112131415// 向 users 表中，新增一条数据，其中 username 的值为 Spider-Man，password 的值为 pcc123const user = { username: 'Spider-Man', password: 'pcc123' }// 定义待执行的 SQL 语句const sqlStr = 'insert into users (username, password) values (?, ?)'// 执行 SQL 语句db.query(sqlStr, [user.username, user.password], (err, results) =&gt; { // 执行 SQL 语句失败了 if (err) return console.log(err.message) // 成功了 // 注意：如果执行的是 insert into 插入语句，则 results 是一个对象 // 可以通过 affectedRows 属性，来判断是否插入数据成功 if (results.affectedRows === 1) { console.log('插入数据成功!') }}) 插入数据的便捷方式向表中新增数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据： 1234567891011// 插入数据的便捷方式const user = { username: 'Spider-Man2', password: 'pcc4321' }// 定义待执行的 SQL 语句const sqlStr = 'insert into users set ?'// 执行 SQL 语句db.query(sqlStr, user, (err, results) =&gt; { if (err) return console.log(err.message) if (results.affectedRows === 1) { console.log('插入数据成功') }}) 更新数据可以通过如下方式，更新表中的数据： 123456789101112// 更新用户的信息const user = { id: 6, username: 'aaa', password: '000' }// 定义 SQL 语句const sqlStr = 'update users set username=?, password=? where id=?'// 执行 SQL 语句db.query(sqlStr, [user.username, user.password, user.id], (err, results) =&gt; { if (err) return console.log(err.message) // 注意：执行了 update 语句之后，执行的结果，也是一个对象，可以通过 affectedRows 判断是否更新成功 if (results.affectedRows === 1) { console.log('更新成功') }}) 更新数据的便捷方式更新表数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速更新表数据： 1234567891011// 更新数据的便捷方式const user = { id: 6, username: 'aaaa', password: '0000' }// 定义 SQL 语句const sqlStr = 'update users set ? where id=?'// 执行 SQL 语句db.query(sqlStr, [user, user.id], (err, results) =&gt; { if (err) return console.log(err.message) if (results.affectedRows === 1) { console.log('更新数据成功') }}) 删除数据在删除数据时，推荐根据 id 这样的唯一标识，来删除对应的数据。示例如下： 123456789// 删除 id 为 5 的用户const sqlStr = 'delete from users where id=?'db.query(sqlStr, 5, (err, results) =&gt; { if (err) return console.log(err.message) // 注意：执行 delete 语句之后，结果也是一个对象，也会包含 affectedRows 属性 if (results.affectedRows === 1) { console.log('删除数据成功') }}) 标记删除使用 DELETE 语句，会把真正的把数据从表中删除掉。为了保险起见，推荐使用标记删除的形式，来模拟删除的动作。 所谓的标记删除，就是在表中设置类似于 status 这样的状态字段，来标记当前这条数据是否被删除。 当用户执行了删除的动作时，我们并没有执行 DELETE 语句把数据删除掉，而是执行了 UPDATE 语句，将这条数据对应的 status 字段标记为删除即可。 12345678// 标记删除const sqlStr = 'update users set status=? where id=?'db.query(sqlStr, [0, 6], (err, results) =&gt; { if (err) return console.log(err.message) if (results.affectedRows === 1) { console.log('标记删除成功') }})","link":"/2022/07/20/%E5%9C%A8%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8MySQL/"},{"title":"npm与包的使用","text":"包什么是包Node.js 中的第三方模块又叫做包。 包的来源不同于 Node.js 中的内置模块与自定义模块，包是由第三方个人或团队开发出来的，免费供所有人使用。 为什么需要包由于 Node.js 的内置模块仅提供了一些底层的 API，导致在基于内置模块进行项目开发的时，效率很低。 包是基于内置模块封装出来的，提供了更高级、更方便的 API，极大的提高了开发效率。 包和内置模块之间的关系，类似于 jQuery 和 浏览器内置 API 之间的关系。 从哪里下载包国外有一家 IT 公司，叫做 npm, Inc. 这家公司旗下有一个非常著名的网站： https://www.npmjs.com/ ，它是全球最大的包共享平台，可以从这个网站上搜索到任何你需要的包。 npm, Inc. 公司提供了一个地址为 https://registry.npmjs.org/ 的服务器，来对外共享所有的包，我们可以从这个服务器上下载自己所需要的包。 如何下载包npm, Inc. 公司提供了一个包管理工具，Node Package Manager（简称 npm 包管理工具），这个包管理工具随着 Node.js 的安装包一起被安装到了用户的电脑上。 格式化时间传统案例15.dateFormat.js文件 1234567891011121314151617181920212223// 1. 定义格式化时间的方法function dateFormat(dtStr) { const dt = new Date(dtStr) const y = dt.getFullYear() const m = padZero(dt.getMonth() + 1) const d = padZero(dt.getDate()) const hh = padZero(dt.getHours()) const mm = padZero(dt.getMinutes()) const ss = padZero(dt.getSeconds()) return `${y}-${m}-${d} ${hh}:${mm}:${ss}` } // 定义补零的函数 function padZero(n) { return n &gt; 9 ? n : '0' + n } module.exports = { dateFormat } 调用： 12345678// 导入自定义的格式化时间的模块const TIME = require('./15.dateFormat')// 调用方法，进行时间的格式化const dt = new Date()// console.log(dt)const newDT = TIME.dateFormat(dt)console.log(newDT) npm格式化时间在项目中安装包 123npm install moment或npm i moment 调用： 123456// 1. 导入需要的包// 注意：导入的名称，就是装包时候的名称const moment = require('moment')const dt = moment().format('YYYY-MM-DD HH:mm:ss')console.log(dt) 安装指定版本的包默认情况下，使用 npm install 命令安装包的时候，会自动安装最新版本的包。如果需要安装指定版本的包，可以在包名之后，通过 @ 符号指定具体的版本例如： 1npm i moment@2.22.2 初次装包后多了哪些文件初次装包完成后，在项目文件夹下多一个叫做 node_modules 的文件夹和 package-lock.json 的配置文件。 其中： node_modules 文件夹用来存放所有已安装到项目中的包。require() 导入第三方包时，就是从这个目录中查找并加载包。 package-lock.json 配置文件用来记录 node_modules 目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等。 注意：不要手动修改 node_modules 或 package-lock.json 文件中的任何代码，npm 包管理工具会自动维护它们。 包的语义化版本规范包的版本号是以“点分十进制”形式进行定义的，总共有三位数字，例如 2.24.0其中每一位数字所代表的的含义如下： 第1位数字：大版本 第2位数字：功能版本 第3位数字：Bug修复版本 版本号提升的规则：只要前面的版本号增长了，则后面的版本号归零。 包管理配置文件npm 规定，在项目根目录中，必须提供一个叫做 package.json 的包管理配置文件。用来记录与项目有关的一些配置信息。例如： 项目的名称、版本号、描述等 项目中都用到了哪些包 哪些包只在开发期间会用到 那些包在开发和部署时都需要用到 多人协作的问题第三方包的体积过大，不方便团队成员之间共享项目源代码。 解决方案：共享时剔除node_modules 如何记录项目中安装了哪些包在项目根目录中，创建一个叫做 package.json 的配置文件，即可用来记录项目中安装了哪些包。从而方便剔除 node_modules 目录之后，在团队成员之间共享项目的源代码。 注意：今后在项目开发中，一定要把 node_modules 文件夹，添加到 .gitignore 忽略文件中。 快速创建 package.jsonnpm 包管理工具提供了一个快捷命令，可以在执行命令时所处的目录中，快速创建 package.json 这个包管理配置文件： 1npm init -y 注意： 上述命令只能在英文的目录下成功运行！所以，项目文件夹的名称一定要使用英文命名，不要使用中文，不能出现空格。 运行 npm install 命令安装包的时候，npm 包管理工具会自动把包的名称和版本号，记录到 package.json 中。 dependencies 节点package.json 文件中，有一个 dependencies 节点，专门用来记录您使用 npm install 命令安装了哪些包。例如： 123&quot;dependencies&quot;: { &quot;moment&quot;: &quot;^2.29.4&quot;} 一次性安装所有的包当我们拿到一个剔除了 node_modules 的项目之后，需要先把所有的包下载到项目中，才能将项目运行起来。否则会报类似于下面的错误： 12# 由于项目运行依赖于moment这个包，如果没有提前安装好这个包，就会报如下的错误:Error: Cannot find module 'moment' 可以运行 npm install 命令（或 npm i）一次性安装所有的依赖包： 123# 执行npm install 命令时，npm包管理工具会先读取 package.json 中的 dependencies节点，# 读取到记录的所有依赖包名称和版本号之后，npm包管理工具会把这些包一次性下载到项目中npm install 卸载包可以运行 npm uninstall 命令，来卸载指定的包： 12# 使用npm uninstall具体的包名来卸载包npm uninstall moment 注意：npm uninstall 命令执行成功后，会把卸载的包，自动从 package.json 的 dependencies 中移除掉。 devDependencies 节点如果某些包只在项目开发阶段会用到，在项目上线之后不会用到，则建议把这些包记录到 devDependencies 节点中。与之对应的，如果某些包在开发和项目上线之后都需要用到，则建议把这些包记录到 dependencies 节点中。 可以使用如下的命令，将包记录到 devDependencies 节点中： 1234# 安装指定的包，并记录到devDependencies节点中npm i 包名 -D# 注意:上述命令是简写形式，等价于下面完整的写法:npm install 包名 --save-dev 解决下包速度慢的问题为什么下包速度慢在使用 npm 下包的时候，默认从国外的 https://registry.npmjs.org/ 服务器进行下载，此时，网络数据的传输需要经过漫长的海底光缆，因此下包速度会很慢。 淘宝 NPM 镜像服务器淘宝在国内搭建了一个服务器，专门把国外官方服务器上的包同步到国内的服务器，然后在国内提供下包的服务。从而极大的提高了下包的速度。 扩展：镜像（Mirroring）是一种文件存储形式，一个磁盘上的数据在另一个磁盘上存在一个完全相同的副本即为镜像。 切换 npm 的下包镜像源下包的镜像源，指的就是下包的服务器地址。 123456# 查看当前的下包镜像源npm config get registry# 将下包的镜像源切换为淘宝镜像源npm config set registry=https://registry.npm.taobao.org/# 检查镜像源是否下载成功npm config get registry nrm为了更方便的切换下包的镜像源，我们可以安装 nrm 这个工具，利用 nrm 提供的终端命令，可以快速查看和切换下包的镜像源。 123456# 通过npm包管理器，将nrm安装为全局可用的工具npm i nrm -g# 查看所有可用的镜像源nrm ls# 将下包的镜像源切换为taobao镜像nrm use taobao 包的分类使用 npm 包管理工具下载的包，共分为两大类，分别是： 项目包 全局包 项目包那些被安装到项目的 node_modules 目录中的包，都是项目包。 项目包又分为两类，分别是： 开发依赖包（被记录到 devDependencies 节点中的包，只在开发期间会用到） 核心依赖包（被记录到 dependencies 节点中的包，在开发期间和项目上线之后都会用到） 1234# 开发依赖包(会被记录到devDependencies节点下)npm i 包名 -D# 核心依赖包(会被记录到dependencies节点下)npm i 包名 全局包在执行 npm install 命令时，如果提供了 -g 参数，则会把包安装为全局包。 全局包会被安装到 C:\\Users\\用户目录\\AppData\\Roaming\\npm\\node_modules 目录下。 1234# 全局安装指定的包npm i 包名 -g# 卸载全局安装的包npm uninstall 包名 -g 注意： 只有工具性质的包，才有全局安装的必要性。因为它们提供了好用的终端命令。 判断某个包是否需要全局安装后才能使用，可以参考官方提供的使用说明即可。 i5ting_toci5ting_toc 是一个可以把 md 文档转为 html 页面的小工具，使用步骤如下： 1234# 将i5ting_toc安装为全局包npm install -g i5ting _toc#调用i5ting _toc，实现 md 转 html 的功能i5ting_toc -f 要转换的md文件路径 -o 规范的包结构一个规范的包，它的组成结构，必须符合以下 3 点要求： 包必须以单独的目录而存在 包的顶级目录下要必须包含 package.json 这个包管理配置文件 package.json 中必须包含 name，version，main 这三个属性，分别代表包的名字、版本号、包的入口。 注意：以上 3 点要求是一个规范的包结构必须遵守的格式，关于更多的约束，可以参考如下网址：https://yarnpkg.com/configuration/manifest 开发属于自己的包例如npm-test-tools包： 需要实现的功能 格式化日期 转义 HTML 中的特殊字符 还原 HTML 中的特殊字符 初始化包的基本结构新建 npm-test-tools 文件夹，作为包的根目录在 npm-test-tools 文件夹中，新建如下三个文件以及一个文件夹： package.json （包管理配置文件） index.js （包的入口文件） README.md （包的说明文档） src 文件夹 （模块化功能） 初始化 package.json12345678{ &quot;name&quot; : &quot;npm-test-tools&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;main&quot; : &quot;index.js&quot;, &quot;description&quot;:&quot;提供了格式化时间，HTMLEscape的功能&quot;, &quot;keywords&quot;: [&quot;npm&quot;, &quot;dateFormat&quot;, &quot;escape&quot;], &quot;license&quot; : &quot;ISC&quot;} 在该目录下的src目录下的dateFormat.js 中定义格式化时间的方法12345678910111213141516171819// 定义格式化时间的方法function dateFormat(dtStr) { const dt = new Date(dtStr) const y = dt.getFullYear() const m = padZero(dt.getMonth() + 1) const d = padZero(dt.getDate()) const hh = padZero(dt.getHours()) const mm = padZero(dt.getMinutes()) const ss = padZero(dt.getSeconds()) return `${y}-${m}-${d} ${hh}:${mm}:${ss}` } // 定义补零的函数 function padZero(n) { return n &gt; 9 ? n : '0' + n } 在该目录下的src目录下的dateFormat.js 中声明module.exports1234// 向外暴露需要的成员 module.exports = { dateFormat } 在该目录下的src目录下的htmlEscape.js 中定义定义转义 HTML 字符的方法123456789101112131415// 定义转义 HTML 字符的函数function htmlEscape(htmlstr) { return htmlstr.replace(/&lt;|&gt;|&quot;|&amp;/g, match =&gt; { switch (match) { case '&lt;': return '&amp;lt;' case '&gt;': return '&amp;gt;' case '&quot;': return '&amp;quot;' case '&amp;': return '&amp;amp;' } })} 在该目录下的src目录下的htmlEscape.js 中定义还原 HTML 的方法123456789101112131415// 定义还原 HTML 字符串的函数function htmlUnEscape(str) { return str.replace(/&amp;lt;|&amp;gt;|&amp;quot;|&amp;amp;/g, match =&gt; { switch (match) { case '&amp;lt;': return '&lt;' case '&amp;gt;': return '&gt;' case '&amp;quot;': return '&quot;' case '&amp;amp;': return '&amp;' } })} 在该目录下的src目录下的htmlEscape.js 中声明module.exports12345// 向外暴露需要的成员module.exports = { htmlEscape, htmlUnEscape} 在 index.js 中，导入两个模块，得到需要向外共享的方法1234// 这是包的入口文件const date = require('./src/dateFormat')const escape = require('./src/htmlEscape')} 在 index.js 中，使用 module.exports 把对应的方法共享出去12345// 向外暴露需要的成员module.exports = { ...date, ...escape} 编写包的说明文档包根目录中的 README.md 文件，是包的使用说明文档。通过它，我们可以事先把包的使用说明，以 markdown 的格式写出来，方便用户参考。 README.md 文件中具体写什么内容，没有强制性的要求；只要能够清晰地把包的作用、用法、注意事项等描述清楚即可。 这个包的 README.md 文档中，包含以下 6 项内容： 安装方式、导入方式、格式化时间、转义 HTML 中的特殊字符、还原 HTML 中的特殊字符、开源协议。 测试1234567891011121314const test = require('./npm-test-tools')// 格式化时间的功能const dtStr = test.dateFormat(new Date())console.log(dtStr)console.log('-----------')const htmlStr = '&lt;h1 title=&quot;abc&quot;&gt;这是h1标签&lt;span&gt;123&amp;nbsp;&lt;/span&gt;&lt;/h1&gt;'const str = test.htmlEscape(htmlStr)console.log(str)console.log('-----------')const str2 = test.htmlUnEscape(str)console.log(str2) 结果： 123452022-07-10 18:32:17-----------&amp;lt;h1 title=&amp;quot;abc&amp;quot;&amp;gt;这是h1标签&amp;lt;span&amp;gt;123&amp;amp;nbsp;&amp;lt;/span&amp;gt;&amp;lt;/h1&amp;gt;-----------&lt;h1 title=&quot;abc&quot;&gt;这是h1标签&lt;span&gt;123&amp;nbsp;&lt;/span&gt;&lt;/h1&gt; 发布包注册 npm 账号 访问 https://www.npmjs.com/ 网站，点击 sign up 按钮，进入注册用户界面 填写账号相关的信息：Username、Email address、Password 勾选同意许可 点击 Create an Account 按钮，注册账号 邮箱一次性密码验证 终端登录 npm 账号npm 账号注册完成后，可以在终端中执行 npm login 命令，依次输入用户名、密码、邮箱（一次性密码验证邮箱）后，即可登录成功。 注意：在运行 npm login 命令之前，必须先把下包的服务器地址切换为 npm 的官方服务器。否则会导致发布包失败！ 把包发布到 npm 上将终端切换到包的根目录之后，运行 npm publish 命令，即可将包发布到 npm 上（注意：包名不能和 npm 官网上的重复）。 会有邮件提示包发布成功。 在https://www.npmjs.com/ 登录后，可在头像菜单选项下的Packages下查看自己发布的包。 删除已发布的包运行 npm unpublish 包名 --force 命令，即可从 npm 删除已发布的包。注意： npm unpublish 命令只能删除 72 小时以内发布的包 npm unpublish 删除的包，在 24 小时内不允许重复发布 发布包的时候要慎重，尽量不要往 npm 上发布没有意义的包！","link":"/2022/07/10/npm%E4%B8%8E%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8/"},{"title":"hexo配置主题","text":"正如该博客封面图所示，主题配置成自己想要的效果不太容易，好多不懂，网上查有的也查不到结果。 所以搞多少算多少，之后再慢慢补吧。 安装主题在官网选择自己想要的主题：https://hexo.io/themes/ Git来克隆主题的代码仓库到themes目录下1git clone https://github.com/ppoffice/hexo-theme-主题名.git themes/主题名 切换主题_config.yml文件中的修改theme属性1theme: 主题名 主题适配一些前言需要配置站点下_config.主题名.yml的内容。 一般站点下和主题目录下都会有_config.yml文件。 但是由于主题编写语言不同，导致有的主题文件下的默认配置文件_config.yml不存在。有该文件可用其对不同页面进行配置。 _config.主题名.yml配置版本1version: 5.0.0 主题皮肤1variant: default logo123# logo: /img/logo.svg #logo,可用图片或文字logo: text: SummlBlog 菜单导航栏图标12head: : /ifaviconmg/favicon.svg 导航栏1234567891011navbar: menu: 主页: / 归档: /archives 分类: /categories 标签: /tags 关于: /about links: GitHub: icon: fab fa-github url: https://github.com/Summl 页脚123456789101112footer: links: # Creative Commons: # icon: fab fa-creative-commons # url: https://creativecommons.org/ # Attribution 4.0 International: # icon: fab fa-creative-commons-by # url: https://creativecommons.org/licenses/by/4.0/ # Download on GitHub: My GitHub: icon: fab fa-github url: https://github.com/Summl 文章theme：可对代高亮显示设置 clipboard：代码复制按钮 fold：折叠或展开所有代码块 readtime：阅读整篇文章大概所需时间时间 update_time：文章更新时间 123456789101112131415161718article: highlight: # https://github.com/highlightjs/highlight.js/tree/master/src/styles theme: atom-one-light clipboard: true fold: unfolded readtime: true update_time: true licenses: Creative Commons: icon: fab fa-creative-commons url: https://creativecommons.org/ Attribution: icon: fab fa-creative-commons-by url: https://creativecommons.org/licenses/by/4.0/ Noncommercial: icon: fab fa-creative-commons-nc url: https://creativecommons.org/licenses/by-nc/4.0/ 搜索框12search: type: insight 评论、打赏、分享需要专门设置 12345678910111213141516171819202122232425262728# comment:# type: disqus# shortname: '' # donates:# -# type: afdian# url: ''# -# type: alipay# qrcode: ''# -# type: buymeacoffee# url: ''# -# type: patreon# url: ''# -# type: paypal# business: ''# currency_code: USD# -# type: wechat# qrcode: ''# share:# type: sharethis# install_url: '' 侧栏固定12345sidebar: left: sticky: false right: sticky: false 侧栏配置position设置right会变三栏 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374widgets: - position: left type: profile author: Summl author_title: '一枚无名小辈' location: '中国' avatar: avatar_rounded: false gravatar: follow_link: https://Summl.github.io/ social_links: Github: icon: fab fa-github url: https://Summl.github.io/ Facebook: icon: fab fa-facebook url: https://facebook.com Twitter: icon: fab fa-twitter url: https://twitter.com Dribbble: icon: fab fa-dribbble url: https://dribbble.com RSS: icon: fas fa-rss url: / - position: left type: toc index: true collapsed: true depth: 3 - position: left type: links links: # Hexo: https://hexo.io # Bulma: https://bulma.io gitee: https://gitee.com/ma-jia-le Email: 1870949565@qq.com 稀土掘金: https://juejin.cn/user/4002677701488424 简书: https://www.jianshu.com/u/8121c6bc7a9a - position: left type: recent_posts - position: left type: categories - position: left type: archives - position: left type: tags - position: left # type: subscribe_email type: # description: # feedburner_id: '' - position: left # type: adsense type: client_id: '' slot_id: '' - position: left # type: followit type: # description: # action_url: '' # verification_code: '' 网站访问量与访客量统计修改主题配置文件，_config.文件名.yml文件 1busuanzi: true source\\_posts博客设置博客头部设置12345678910title: Hexo+GitHub自建博客 #博客标题 date: 2022-07-06 14:07:14 #创建博客时间cover: /gallery/Hexo+GitHub自建博客/图1.jpg #博客封面thumbnail: /gallery/Hexo+GitHub自建博客/图1.jpg #博客缩略图tags: #标签 可以多个 - GitHub - Hexocategories: #分类 可多级目录 - 关于博客（一级分类目录） - 二级分类目录 图片需要在source目录下新建gallery目录 主页博客添加阅读全文按钮在文章中截断地方添加 1&lt;!--more--&gt; 新建文章头部模板在scaffolds目录下的post.md文件里设置 例如： 12345678title: {{ title }}date: {{ date }}cover: /gallery/{{ title }}/图1.jpgthumbnail: /gallery/{{ title }}/图1.jpgtags: - categories: - 文章置顶安装如下插件 12npm uninstall hexo-generator-index --savenpm install hexo-generator-index-pin-top --save 需要置顶的文章头部再增加如下属性配置 1top: true 注：可以设置true，也可以设置置顶的编号顺序，例如top: 1 文章目录显示站点下的_config.yml文件里添加 1toc: true 在主题的_config.post.yml文件下可进行设置 12345position: left type: toc index: true collapsed: true depth: 3 目录粘性定位原来只支持侧边栏整体粘性定位，为了阅读体验，只针对目录开启粘性定位，增加 column-left is-sticky 类，并调整样式。 source/js/main.js文件123 if ($toc.length &gt; 0) {+ $toc.addClass('column-left is-sticky'); const $mask = $('&lt;div&gt;'); include/style/widget.styl文件123+#toc+ max-height: calc(100vh - 22px)+ overflow-y: scroll 博客内容插入图片修改博客根目录中_config.yml文件的配置项post_asset_folder为true 完成此设置后，当你通过hexo new 文件名新建博客后，会产生一个和文件同名的文件夹。 在博客根目录中下使用npm安装插件： 1npm install https://github.com/CodeFalling/hexo-asset-image --save 当文章需要添加图片时，将需要添加的图片放入同名的文件夹中，同时通过相对路径索引到该图片。 1![示例](./解决Hexo博客不显示图片的一种方法/1.png) 页面设置新建标签 tags 页面如果在 source 目录下还没有 tags/index.md 文件，那么就需要新建一个 1hexo new page &quot;tags&quot; 编辑刚刚新建的页面文件 /source/tags/index.md，至少需要以下内容： 1234title: tagesdate: 2022-07-07 18:55:10type: tagslayout: tags 分类 categories 页面、关于我 about 页面同上about关于页面信息展示在source 目录下还没有 about.md 文件填写内容 博客布局分栏设置通过配置的方式把所有文章变为两栏布局，其他页面设置为三栏布局 在站点下的_config.yml文件把需要的widget分别显示在left和right 在_config.post.yml文件把需要的widget显示在left 但两栏整体宽度跟三栏不同，因此强制指定为三栏布局，并且修改相应的宽度，这样所有的页面侧边栏宽度保持一致。 layout/layout.jsx文件1234 &lt;Head site={site} config={config} helper={helper} page={page} /&gt;- &lt;body class={`is-${columnCount}-column`}&gt;+ &lt;body class={`is-3-column`}&gt; &lt;Navbar config={config} helper={helper} page={page} /&gt; layout/layout.jsx文件1234 'is-12': columnCount === 1,- 'is-8-tablet is-8-desktop is-8-widescreen': columnCount === 2,+ 'is-8-tablet is-8-desktop is-9-widescreen': columnCount === 2, 'is-8-tablet is-8-desktop is-6-widescreen': columnCount === 3 layout/common/widgets.jsx文件12345678 function getColumnSizeClass(columnCount) { switch (columnCount) { case 2:- return 'is-4-tablet is-4-desktop is-4-widescreen';+ return 'is-4-tablet is-4-desktop is-3-widescreen'; case 3: return 'is-4-tablet is-4-desktop is-3-widescreen'; } 并优化在不同屏幕小大下的宽度 include/style/responsive.styl文件1234567891011121314151617+widescreen()+ .is-3-column .containe+ max-width: $widescreen - $gap+ width: $widescreen - $gap+ .is-1-column .container, .is-2-column .container max-width: $desktop - 2 * $gap width: $desktop - 2 * $gap+fullhd()+ .is-3-column .container+ max-width: $fullhd - 2 * $gap+ width: $fullhd - 2 * $gap+ .is-2-column .container max-width: $widescreen - 2 * $gap width: $widescreen - 2 * $gap","link":"/2022/07/08/hexo%E9%85%8D%E7%BD%AE%E4%B8%BB%E9%A2%98/"},{"title":"搞博客遇到的一些问题","text":"问题一：本地能显示博客，GitHub地址显示不出来博客在复制id_rsa.pub文件里的内容，粘贴到Github的SSH and GPG keys里时，直接粘贴，不要删除换行符之类。 问题二：FATAL Port 4000 has been used. Try other port instead.在启动服务加上端口号： 1hexo server -p 4001 问题三：git clone unable to access ‘XXX‘: OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 10054方式一：解除ssl验证后，再次git：命令行运行 1git config --global http.sslVerify &quot;false&quot; 方式二：加大缓存大小 1git config --global http.postBuffer 524288000 问题四：GitHub建仓库时忘记建READ.ME文件在根目录的source 文件夹下新建README.md文件 然而当我们执行 hexo g -d 部署博客的时候会发现README.md变成了 README.html。GitHub上也只有README.html文件。 原因是当我们在执行 hexo g -d 命令时，.md 文件会被转化成.html 文件，并将这些文件放到 public 目录里，最后再提交到远程 GitHub 仓库，而 Hexo 也提供了一个方法，让.md 文件不被转换成.html 文件，在根目录的 _config.yml 配置文件里，找到 skip_render 关键字，添加 README.md，让解释器跳过渲染就行了： 1skip_render: README.md 一些注意项注意一：在注释一些选项时要把上面的-一起注释，否则会报错 123# -# position: left# type: toc ：后面有一个空格 注意二：有的主题目录里没有_config.post.yml文件，导致一些功能不能设置。 可手动在_config.主题名.yml 同级目录下自行创建。","link":"/2022/07/08/%E6%90%9E%E5%8D%9A%E5%AE%A2%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"},{"title":"Hexo+GitHub自建博客","text":"下载安装软件Git、Node.js、Hexo 下载安装Hexo命令1npm install -g hexo-cli Hexo命令,生成本地博客初始化Hexo，根目录下1hexo init 安装博客所需要的依赖文件1npm install 生成静态页面至public目录123hexo generate或hexo g 开启预览访问端口（默认端口4000，ctrl + c 关闭 server ，地址：http://localhost:4000/ ）123hexo server或 hexo s 如果4000端口被占用，可更换端口1hexo s -p 4001 部署到GitHub123hexo deploy或 hexo d 清除缓存文件 (db.json) 和已生成的静态文件 (public)1hexo clean 新建文章123hexo new &quot;postName&quot;或 hexo n &quot;postName&quot; 组合命令生成并本地预览1hexo s -g 生成并上传1hexo d -g 本地博客发布到GitHub命令在博客目录下，安装发布的插件1npm install hexo-deployer-git --save 将本地目录与GitHub关联起来 1ssh-keygen -t rsa -C &quot;你的邮箱地址&quot; 一直回车，直到能输入命令。然后在C:/Users/[username]目录下找到名为.ssh的文件夹， 文件夹内会有两个文件，一个id_rsa.pub一个id_rsa，用文本编辑器打开id_rsa.pub，复制里面的的内容。 打开Github，点击右上角的头像 Settings 选择SSH and GPG keys。点击New SSH key 将之前复制的内容粘帖到Key的框中。 上面的Title可以随意，点击Add SSH key 完成添加。（注意不要删除粘贴的换行符） 回到Git的命令行界面，测试一下是否与GitHub连接成功1ssh -T git@github.com 点击回车，然后会出现一个询问内容，输入yes，回车，会出现一段内容，Hi &lt;account name&gt;! You've successfully authenticated, but GitHub doesnot provide shell access.。 说明连接成功。此处这个&lt;account name&gt;应该是你Github的用户名。 修改Hexo配置文件进入博客站点目录，用文本编辑器打开_config.yml1234567title: 你的博客名subtitle: 博客的副标题，有些主题支持description: 博客描述keywords: 博客关键词author: 作者，在文章中显示language: 博客语言语种 timezone: 时区 1url: 修改为https://&lt;用户名&gt;.github.io 滑到文件最底部，有一个deploy，在deploy下面添加一个repo项 ，一个branch项。 1234type: gitrepo: git@github.com:&lt;Github用户名&gt;/&lt;Github用户名&gt;.github.io.git #也可使用https地址，如：https://github.com/&lt;Github用户名&gt;/&lt;Github用户名&gt;.github.io.git branch: master 生成页面 123hexo cleanhexo g -dhexo s 在浏览器中打开https://&lt;用户名&gt;.github.io，查看上传的网页。","link":"/2022/07/06/Hexo+GitHub%E8%87%AA%E5%BB%BA%E5%8D%9A%E5%AE%A2/"}],"tags":[{"name":"GitHub","slug":"GitHub","link":"/tags/GitHub/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"npm","slug":"npm","link":"/tags/npm/"},{"name":"自建包","slug":"自建包","link":"/tags/%E8%87%AA%E5%BB%BA%E5%8C%85/"},{"name":"MySQL","slug":"MySQL","link":"/tags/MySQL/"},{"name":"前端","slug":"前端","link":"/tags/%E5%89%8D%E7%AB%AF/"},{"name":"JSON","slug":"JSON","link":"/tags/JSON/"},{"name":"webpack","slug":"webpack","link":"/tags/webpack/"},{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"高阶函数","slug":"高阶函数","link":"/tags/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/"}],"categories":[{"name":"关于博客","slug":"关于博客","link":"/categories/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2/"},{"name":"Node.js","slug":"Node-js","link":"/categories/Node-js/"},{"name":"前端","slug":"前端","link":"/categories/%E5%89%8D%E7%AB%AF/"},{"name":"JSON","slug":"JSON","link":"/categories/JSON/"},{"name":"webpack","slug":"webpack","link":"/categories/webpack/"},{"name":"JavaScript","slug":"JavaScript","link":"/categories/JavaScript/"}]}